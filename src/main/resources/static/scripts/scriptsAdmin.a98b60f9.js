function articuloController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.listadoCodigo={},a.articulo={},a.codigo={},a.ipp=20,a.pageNumber=1,a.obtenerListaArticulo=function(){var c="/articulos?page="+(a.pageNumber-1);if(""!=a.search&&void 0!=a.search){var d="&search="+a.search;c="/articulo/search?page="+(a.pageNumber-1)+d}b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscarArticulo=function(){a.obtenerListaArticulo()},a.obtenerListaCodigo=function(c){void 0!=c.articuloId&&b.get("/articulo/"+c.articuloId+"/items").success(function(b,c,d,e){a.listadoCodigo=b})},a.agregarArticulo=function(){a.articulo.articuloId=null,a.save(function(){a.articulo={}})},a.modificarArticulo=function(){a.save(function(){a.articulo={}})},a.agregarCodigo=function(){a.codigo.itemId=null,a.saveItem()},a.modificarCodigo=function(){a.saveItem()},a.modificar=function(b){a.articulo=b},a.copiar=function(b){a.modificar(b),a.articulo.articuloId=void 0,a.articulo.codigo="",a.articulo.cantidadStock=0,a.articulo.cantidad=0;var d=c.document.getElementById("codigo");d&&d.focus()},a.save=function(c){b.put("/articulo/agregar",a.articulo).success(function(b,d,e,f){a.articulo=b,a.obtenerListaArticulo(),void 0!=c&&c()})},a.eliminar=function(c){confirm("Esta seguro que quiere elimiar el articulo?")&&b.get("/articulo/delete/"+c.articuloId).success(function(b,c,d,e){a.obtenerListaArticulo()})},a.eliminarCodigo=function(a,c){b.get("/articulo/"+a.articuloId+"/item/delete/"+c.itemId).success(function(a,b,c,d){})},a.saveItem=function(){b.put("/articulo/"+a.articulo.articuloId+"/agregar",a.codigo).success(function(b,c,d,e){a.codigo=b})},a.init=function(){a.obtenerListaArticulo()},a.isModificable=function(){return void 0==a.articulo.articuloId},a.cerrarSession=function(){b.post("/logout",{}).success(function(){d.path("/index.html")}).error(function(a){})},a.init()}function ventaController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.vendedor={},a.codigo={},a.ipp=20,a.pageNumber=1,a.startTime=new Date,a.endTime=new Date,a.dateOptions={formatYear:"yy",startingDay:1},a.dtStartTime={opened:!1},a.dtEndTime={opened:!1},a.openStartTime=function(b){a.dtStartTime.opened=!0},a.openEndTime=function(b){a.dtEndTime.opened=!0},a.obtenerLista=function(){void 0==a.endTime&&(a.endTime=new Date),void 0==a.startTime&&(a.startTime=new Date),a.startTime.setMinutes(0),a.startTime.setSeconds(0),a.startTime.setHours(0),a.startTime.setMilliseconds(0),a.endTime.setMinutes(59),a.endTime.setSeconds(59),a.endTime.setHours(23),a.endTime.setMilliseconds(999);var c=a.convertTime(a.startTime),d=a.convertTime(a.endTime),e="/ventas?page="+(a.pageNumber-1)+"&startTime="+c+"&endTime="+d;if(""!=a.search&&void 0!=a.search){var f="&search="+a.search+"&startTime="+c+"&endTime="+d;e="/venta/search?page="+(a.pageNumber-1)+f}b.get(e).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscar=function(){a.obtenerLista()},a.init=function(){a.obtenerLista()},a.cerrarSession=function(){b.post("/logout",{}).success(function(){d.path("/index.html")}).error(function(a){})},a.convertTime=function(a){return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"Z"},a.init()}function vendedorController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.vendedor={},a.codigo={},a.ipp=20,a.pageNumber=1,a.obtenerListaVendedor=function(){var c="/vendedores?page="+(a.pageNumber-1);if(""!=a.search&&void 0!=a.search){var d="&search="+a.search;c="/vendedor/search?page="+(a.pageNumber-1)+d}b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscar=function(){a.obtenerListaVendedor()},a.agregar=function(){a.vendedor.vendedorId=null,a.save(function(){a.vendedor={}})},a.modificar=function(){a.save(function(){a.vendedor={}})},a.editar=function(b){a.vendedor=b},a.save=function(c){b.put("/vendedor/agregar",a.vendedor).success(function(b,d,e,f){a.vendedor=b,a.obtenerListaVendedor(),void 0!=c&&c()})},a.eliminar=function(c){confirm("Esta seguro que quiere elimiar el vendedor?")&&b.get("/vendedor/delete/"+c.vendedorId).success(function(b,d,e,f){a.obtenerListaVendedor(),a.obtenerListaCodigo(c)})},a.init=function(){a.obtenerListaVendedor()},a.isModificable=function(){return void 0==a.vendedor.vendedorId},a.cerrarSession=function(){b.post("/logout",{}).success(function(){d.path("/index.html")}).error(function(a){})},a.init()}articuloController.$inject=["$scope","$http","$window","$location"],ventaController.$inject=["$scope","$http","$window","$location"],vendedorController.$inject=["$scope","$http","$window","$location"],angular.module("mainAdminApp",["ngCookies","ngResource","ngRoute","ngSanitize","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/articulo",{templateUrl:"views/admin/articulo.html",controller:"ArticuloController",controllerAs:"articulo"}).when("/vendedor",{templateUrl:"views/admin/vendedor.html",controller:"VendedorController",controllerAs:"vendedor"}).when("/venta",{templateUrl:"views/admin/venta.html",controller:"VentaController",controllerAs:"venta"}).otherwise({redirectTo:"/articulo"})}]).controller("VentaController",ventaController).controller("VendedorController",vendedorController).controller("ArticuloController",articuloController),angular.module("mainAdminApp").run(["$templateCache",function(a){"use strict";a.put("views/admin/articulo.html",'<div> <div id="agregarArticulo" class="panel panel-primary"> <div class="panel-heading">Agregar nuevo artículo</div> <div class="panel-body"> <form> <div class="form-group-sm"> <label for="descripcion">Código de barra</label> <input type="text" id="codigo" class="form-control" placeholder="Codigo de barra" ng-model="articulo.codigo"> </div> <div class="form-group-sm"> <label for="descripcion">Descripción</label> <input type="text" id="descripcion" class="form-control" placeholder="Descripcion" ng-model="articulo.descripcion"> </div> <div class="form-group-sm"> <label for="cantidadStock">Stock</label> <input type="number" id="cantidadStock" class="form-control" placeholder="Stock" ng-model="articulo.cantidadStock" value="" disabled min="0" max="9999"> </div> <div class="form-group-sm"> <label for="cantidad">Cantidad</label> <input type="number" id="cantidad" class="form-control" placeholder="Cantidad" ng-model="articulo.cantidad" min="0" max="9999"> </div> <div class="form-group-sm"> <label for="precio">Precio de lista</label> <input type="number" step="0.01" id="precio" class="form-control" placeholder="Precio lista" ng-model="articulo.precioLista" min="0"> </div> <div class="form-group-sm"> <label for="factor1">Factor 1</label> <input type="number" step="0.01" id="factor1" class="form-control" placeholder="factor 1" ng-model="articulo.factor1" value="1.0" min="0"> </div> <div class="form-group-sm"> <label for="factor2">Factor 2</label> <input type="number" step="0.01" id="factor2" class="form-control" placeholder="factor 2" ng-model="articulo.factor2" value="1.0" min="0"> </div> <div style="margin-top: 10px"> <button ng-click="agregarArticulo();" class="btn btn-success" ng-disabled="!isModificable();">Agregar nuevo</button> <button ng-click="modificarArticulo();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> <div id="listaArticulos"> <div class="panel panel-primary"> <div class="panel-heading">Buscar artículos</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar articulo" ng-model="search" ng-change="buscarArticulo();"> </div> <uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaArticulo();"></uib-pagination> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaArticulo" class="table"> <thead> <tr> <th>Código</th> <th>Precio / Lista</th> <th>f1 / f2</th> <th>Stock</th> <th>Descripción</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="articulo in listado.content"> <td style="width: 20%">{{articulo.codigo}}</td> <td style="width: 10%">{{articulo.precio | currency}} / {{articulo.precioLista | currency}}</td> <td style="width: 10%">{{articulo.factor1 | number:2}} / {{articulo.factor2 | number:2}}</td> <td style="width: 10%">{{articulo.cantidadStock}} ({{articulo.unidadesVendidas}})</td> <td style="width: 30%">{{articulo.descripcion}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="modificar(articulo);" class="btn btn-primary btn-sm">Modificar</button> <button ng-click="copiar(articulo);" class="btn btn-primary btn-sm">Copiar</button> <button ng-click="eliminar(articulo);" class="btn btn-danger btn-sm">Eliminar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/admin/vendedor.html",'<div> <div id="agregarArticulo" class="panel panel-primary"> <div class="panel-heading">Vendedores</div> <div class="panel-body"> <form> <div class="form-group-sm"> <label for="username">Username</label> <input type="text" id="username" class="form-control" placeholder="Username" ng-model="vendedor.username"> </div> <div class="form-group-sm"> <label for="password">Password</label> <input type="password" id="password" class="form-control" placeholder="Password" ng-model="vendedor.password"> </div> <div class="form-group-sm"> <label for="nombre">Nombre</label> <input type="text" id="nombre" class="form-control" placeholder="Nombre" ng-model="vendedor.nombre" value=""> </div> <div class="form-group-sm"> <label for="apellido">Apellido</label> <input type="text" id="apellido" class="form-control" placeholder="Apellido" ng-model="vendedor.apellido"> </div> <div style="margin-top: 10px"> <button ng-click="agregar();" class="btn btn-success" ng-disabled="!isModificable();">Agregar nuevo</button> <button ng-click="modificar();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar vendedor</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar vendedor" ng-model="search" ng-change="buscar();"> </div> <uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaVendedor();"></uib-pagination> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th>Username</th> <th>Nombre</th> <th>Apellido</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="vendedor in listado.content"> <td style="width: 10%">{{vendedor.username}}</td> <td style="width: 10%">{{vendedor.nombre}}</td> <td style="width: 10%">{{vendedor.apellido}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="editar(vendedor);" class="btn btn-primary btn-sm">Modificar</button> <button ng-click="eliminar(vendedor);" class="btn btn-danger btn-sm">Eliminar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/admin/venta.html",'<div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar vendedor" ng-model="search"> </div> <div class="row" style="margin-top: 10px"> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="startTime" is-open="dtStartTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openStartTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="endTime" is-open="dtEndTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openEndTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6"> <span class="input-group-btn"> <button type="button" class="btn btn-primary" ng-click="buscar()">Buscar</button> </span> </div> </div> <uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerLista();"></uib-pagination> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th style="width: 15%">Fecha</th> <th style="width: 10%">Username</th> <th style="width: 15%">Código</th> <th style="width: 15%">Descripción</th> <th style="width: 5%">Cantidad</th> <th style="width: 15%">f1 / f2 / Lista</th> <th style="width: 15%">Monto</th> <th style="width: 5%">Forma de Pago</th> <th style="width: 5%">Cupon</th> <th style="width: 5%"></th> </tr> </thead> <tbody> <tr ng-repeat="v in listado.content"> <td>{{v.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td>{{v.username}}</td> <td>{{v.codigo}}</td> <td>{{v.descripcion}}</td> <td>{{v.cantidad}}</td> <td>{{v.factor1 | number:2}} / {{v.factor2 | number:2}} / {{v.precioLista | currency}}</td> <td>{{v.precio | currency}}</td> <td>{{v.tipoPago}}</td> <td>{{v.nroCupon}}</td> <td><h5 ng-show="v.precio < 0"><span class="label label-danger">Devolución</span></h5> <h5 ng-show="(v.factor1*v.factor2*v.precioLista) > v.precio"><span class="label label-info">Descuento</span></h5></td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>')}]);