function cuentaController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.cuenta={},a.codigo={},a.ipp=20,a.pageNumber=1,a.descripcion="",a.entrega=0,a.vendedores=[],a.obtenerListaVendedores=function(){var c="/vendedores?page=0&size=1000";b.get(c).success(function(b,c,d,e){a.vendedores=b})},a.obtenerLista=function(){var c="/cuentas?page="+(a.pageNumber-1);if(""!=a.search&&void 0!=a.search){var d="&search="+a.search;c="/cuentas?page="+(a.pageNumber-1)+d}b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscar=function(){a.obtenerLista()},a.agregar=function(){a.cuenta.id=null,a.save(function(){a.cuenta={}})},a.modificar=function(){a.save(function(){a.cuenta={}})},a.editar=function(b){a.cuenta=b},a.save=function(c){null==a.cuenta.id?b.post("/cuentas",a.cuenta).success(function(b,d,e,f){a.cuenta=b,a.obtenerLista(),void 0!=c&&c()}):b.put("/cuentas",a.cuenta).success(function(b,d,e,f){a.cuenta=b,a.obtenerLista(),void 0!=c&&c()})},a.eliminar=function(c){confirm("Esta seguro que quiere elimiar la cuenta?")&&b["delete"]("/cuentas/"+c.id).success(function(b,c,d,e){a.obtenerLista()})},a.init=function(){a.obtenerListaVendedores(),a.obtenerLista(),console.log(a.vendedor)},a.isModificable=function(){return void 0==a.cuenta.id},a.agregarEntrega=function(c,d,e,f){var e={descripcion:d,monto:e,username:f.username};confirm("Esta seguro de registrar un ingreso a la cuenta corriente?")&&b.post("/cuentas/"+c.id+"/movimientos",e).success(function(b,c,d,e){console.log(b),a.descripcion="",a.entrega=0,a.obtenerLista()})},a.init()}function articuloController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.listadoCodigo={},a.articulo={},a.codigo={},a.ipp=20,a.pageNumber=1,a.obtenerListaArticulo=function(){var c="/articulos?page="+(a.pageNumber-1);if(""!=a.search&&void 0!=a.search){var d="&search="+a.search;c="/articulo/search?page="+(a.pageNumber-1)+d}b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscarArticulo=function(){a.obtenerListaArticulo()},a.obtenerListaCodigo=function(c){void 0!=c.articuloId&&b.get("/articulo/"+c.articuloId+"/items").success(function(b,c,d,e){a.listadoCodigo=b})},a.agregarArticulo=function(){a.articulo.articuloId=null,a.save(function(){a.articulo={}})},a.modificarArticulo=function(){a.save(function(){a.articulo={}})},a.agregarCodigo=function(){a.codigo.itemId=null,a.saveItem()},a.modificarCodigo=function(){a.saveItem()},a.modificar=function(b){a.articulo=b},a.copiar=function(b){a.modificar(b),a.articulo.articuloId=void 0,a.articulo.codigo="",a.articulo.cantidadStock=0,a.articulo.cantidad=0;var d=c.document.getElementById("codigo");d&&d.focus()},a.save=function(c){b.put("/articulo/agregar",a.articulo).success(function(b,d,e,f){a.articulo=b,a.obtenerListaArticulo(),void 0!=c&&c()})},a.eliminar=function(c){confirm("Esta seguro que quiere elimiar el articulo?")&&b.get("/articulo/delete/"+c.articuloId).success(function(b,c,d,e){a.obtenerListaArticulo()})},a.eliminarCodigo=function(a,c){b.get("/articulo/"+a.articuloId+"/item/delete/"+c.itemId).success(function(a,b,c,d){})},a.saveItem=function(){b.put("/articulo/"+a.articulo.articuloId+"/agregar",a.codigo).success(function(b,c,d,e){a.codigo=b})},a.init=function(){a.obtenerListaArticulo()},a.isModificable=function(){return void 0==a.articulo.articuloId},a.cerrarSession=function(){b.post("/logout",{}).success(function(){d.path("/index.html")}).error(function(a){})},a.init()}function venderController(a,b,c,d,e){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.listadoCodigo={},a.articulo={},a.codigo={},a.ipp=20,a.pageNumber=1,a.vendedores={},a.vendedor={},a.carrito=[],a.listDevolucion=[],a.pagos=[{id:0,value:""},{id:1,value:"Efectivo"},{id:2,value:"Tarjeta"},{id:3,value:"Mixto"},{id:4,value:"Cuenta Corriente"}],a.formaPago=a.pagos[0],a.montoTotal=0,a.mensajeConfirmacionVenta="",a.efectivo=0,a.tarjeta=0,a.entregaInicial=0,a.dni="",a.numeroCupon="",a.limpiarBusqueda=function(){a.listado=[],a.search=""},a.obtenerListaArticulo=function(){if(""!=a.search){var c="/articulos?page="+(a.pageNumber-1);if(""!=a.search&&void 0!=a.search){var d="&search="+a.search;c="/articulo/search?page="+(a.pageNumber-1)+d}b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})}else a.limpiarBusqueda()},a.buscarArticuloDevolucion=function(){var c="/venta/devolucion?codigoDevolucion="+a.codigoDevolucion;b.get(c).success(function(b,c,d,e){a.listadoDevolucion=b,a.listadoDevolucion.forEach(function(a){a.fecha=void 0})})},a.buscarArticulo=function(){a.obtenerListaArticulo()},a.obtenerListaVendedores=function(){var c="/vendedores?page=0&size=1000";b.get(c).success(function(b,c,d,e){a.vendedores=b})},a.agregarCarrito=function(b){var c=!1;a.carrito.forEach(function(a,d,e){a.articulo.codigo==b.codigo&&(a.articulo.cantidadStock>a.cantidad&&a.cantidad++,c=!0)}),!c&&b.cantidadStock>0&&a.carrito.push({cantidad:1,descuento:0,articulo:b,vendedor:a.vendedor,formaPago:a.formaPago.value,nroCupon:a.numeroCupon}),a.calcularTotal(),a.limpiarBusqueda()},a.agregarDevolucion=function(b){var c=!1;a.listDevolucion.forEach(function(a,d,e){a.venta.ventaId==b.ventaId&&(c=!0)}),c||a.listDevolucion.push({cantidad:1,venta:b,vendedor:a.vendedor,formaPago:a.formaPago.value,nroCupon:a.numeroCupon}),a.calcularTotal()},a.removerCarrito=function(b){var c=-1;a.carrito.forEach(function(a,d,e){a.articulo.codigo==b.codigo&&(a.cantidad--,0==a.cantidad&&(c=d))}),c>=0&&a.carrito.splice(c,1),a.calcularTotal()},a.removerDevolucion=function(b){var c=-1;a.listDevolucion.forEach(function(a,d,e){a.venta.ventaId==b.ventaId&&(a.cantidad--,0==a.cantidad&&(c=d))}),c>=0&&a.listDevolucion.splice(c,1),a.calcularTotal()},a.calcularTotal=function(){var b=0;a.carrito.forEach(function(a){precio=a.articulo.precio*(1-a.descuento/100),b+=Math.ceil(a.cantidad*precio)}),a.listDevolucion.forEach(function(a){b-=a.cantidad*Math.ceil(a.venta.precio)}),a.montoTotal=b,a.actualizarTipoPago()},a.precioConDescuento=function(a,b){return Math.ceil(a*(1-b/100))},a.datosVendedor=function(){return a.vendedor.nombre+" "+a.vendedor.apellido},a.actualizarTipoPago=function(){1==a.formaPago.id||3==a.formaPago.id?(a.efectivo=a.montoTotal,a.tarjeta=0):2==a.formaPago.id&&(a.efectivo=0,a.tarjeta=a.montoTotal)},a.actualizarCarrito=function(){a.carrito.forEach(function(b){b.vendedor=a.vendedor,b.formaPago=a.formaPago.value,b.nroCupon=a.numeroCupon}),a.listDevolucion.forEach(function(b){b.vendedor=a.vendedor,b.formaPago=a.formaPago.value,b.nroCupon=a.numeroCupon}),a.actualizarTipoPago()},a.actualizarTarjeta=function(){a.efectivo>a.montoTotal&&(a.efectivo=a.montoTotal),a.tarjeta=a.montoTotal-a.efectivo},a.confirmarVenta=function(){if(console.log(a.formaPago),!("Tarjeta"!=a.formaPago.value&&"Mixto"!=a.formaPago.value||""!=a.numeroCupon&&void 0!=a.numeroCupon))return void alert("Debe ingresar el numero de cupon!");if("Mixto"==a.formaPago.value&&a.efectivo+a.tarjeta!=a.montoTotal)return void alert("Verifique que el importe a pagar con tarjeta y con efectivo sea igual al monto total de venta");if(confirm("Esta seguro de realizar la venta?")){var c=a.efectivo,d=a.tarjeta;a.actualizarCarrito(),b.put("/venta/confirmar",{articulos:a.carrito,devoluciones:a.listDevolucion,efectivo:c,tarjeta:d,formaPago:a.formaPago.value,dni:a.dni,entregaInicial:a.entregaInicial}).success(function(b,c,d,e){a.carrito=[],a.listDevolucion=[],a.calcularTotal(),a.limpiarBusqueda(),a.numeroCupon="",a.mensajeConfirmacionVenta=b.codigoDevolucion,a.listadoDevolucion=[],$("#confirmacionVenta").modal("show"),a.efectivo=0,a.tarjeta=0,a.dni="",a.entregaInicial=0})}},a.cancelar=function(){confirm("Esta seguro de cancelar la venta?")&&(a.carrito=[],a.listDevolucion=[],a.calcularTotal(),a.numeroCupon="")},a.notaCredito=function(){url="/articulo/search?page=0&size=100&search=N.CREDITO",b.get(url).success(function(b,c,d,e){var f=new Number(a.montoTotal);if(0>f){f=-1*f;var g=b.content[0];g.precioLista=f,g.precio=f,g.cantidadStock=1,g.cantidad=1,a.agregarCarrito(g)}})},a.init=function(){a.obtenerListaVendedores()},a.devolucion=function(){$("#dialogDevolucion").modal("show")},a.devolucionCerrar=function(){$("#dialogDevolucion").modal("close")},a.enableConfirm=function(){return a.montoTotal<0||void 0==a.vendedor.username||0==a.formaPago.id||4==a.formaPago.id&&""==a.dni||(3==a.formaPago.id||2==a.formaPago.id)&&""==a.numeroCupon},a.init()}function ventaController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.vendedor={},a.codigo={},a.ipp=20,a.pageNumber=1,a.startTime=new Date,a.endTime=new Date,a.dateOptions={formatYear:"yy",startingDay:1},a.dtStartTime={opened:!1},a.dtEndTime={opened:!1},a.openStartTime=function(b){a.dtStartTime.opened=!0},a.openEndTime=function(b){a.dtEndTime.opened=!0},a.obtenerLista=function(){void 0==a.endTime&&(a.endTime=new Date),void 0==a.startTime&&(a.startTime=new Date),a.startTime.setMinutes(0),a.startTime.setSeconds(0),a.startTime.setHours(0),a.startTime.setMilliseconds(0),a.endTime.setMinutes(59),a.endTime.setSeconds(59),a.endTime.setHours(23),a.endTime.setMilliseconds(999);var c=a.convertTime(a.startTime),d=a.convertTime(a.endTime),e="/ventas?page="+(a.pageNumber-1)+"&startTime="+c+"&endTime="+d;if(""!=a.search&&void 0!=a.search){var f="&search="+a.search+"&startTime="+c+"&endTime="+d;e="/venta/search?page="+(a.pageNumber-1)+f}b.get(e).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscar=function(){a.obtenerLista()},a.init=function(){a.obtenerLista()},a.cerrarSession=function(){b.post("/logout",{}).success(function(){d.path("/index.html")}).error(function(a){})},a.convertTime=function(a){return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)+"Z"},a.init()}function retiroController(a,b,c,d){a.listado={numberOfElements:0,number:0,totalElements:0},a.maxSize=100,a.listadoCodigo={},a.articulo={},a.codigo={},a.ipp=20,a.pageNumber=1,a.vendedores={},a.vendedor={},a.obtenerLista=function(){var c="/retiro/today?page="+(a.pageNumber-1);b.get(c).success(function(b,c,d,e){a.listado=b,a.pageNumber=a.listado.number+1})},a.buscar=function(){a.obtenerLista()},a.agregar=function(){a.retiro.retiroId=void 0,a.retiro.fecha=void 0,a.save(function(){a.retiro={}})},a.modificarRetiro=function(){a.retiro.fecha=void 0,a.save(function(){a.retiro={}})},a.save=function(c){a.retiro.username=a.vendedor.username,b.put("/retiro/agregar",a.retiro).success(function(b,d,e,f){a.retiro=b,a.obtenerLista(),void 0!=c&&c()})},a.obtenerListaVendedores=function(){var c="/vendedores?page=0&size=1000";b.get(c).success(function(b,c,d,e){a.vendedores=b})},a.modificar=function(b){a.retiro=b},a.init=function(){a.obtenerLista(),a.obtenerListaVendedores()},a.init()}function cajaController(a,b,c,d,e){a.caja={},a.efectivoApertura=0,a.abrir=function(){var c={username:a.vendedor.username,efectivoDisponible:a.efectivoApertura};b.put("/caja/abrir",c).success(function(b,c,d,e){a.caja=b,a.isOpen(),a.resumen()})},a.imprimir=function(c){b.put("/caja/imprimir/"+c).success(function(b,c,d,e){a.imprimir=b})},a.cerrar=function(){var c={username:a.vendedor.username};b.put("/caja/cerrar",c).success(function(b,c,d,e){a.caja=b,a.isOpen(),void 0!=a.caja.cajaId&&a.imprimir(a.caja.cajaId)})},a.isOpen=function(){b.put("/caja/abierta").success(function(a,b,c,d){e.cajaAbierta=a})},a.resumen=function(){var c;c=void 0!=a.vendedor?{username:a.vendedor.username}:{username:""},b.put("/caja/resumen",c).success(function(b,c,d,e){a.caja=b})},a.obtenerListaVendedores=function(c){var d="/vendedores?page=0&size=1000";b.get(d).success(function(b,d,e,f){a.vendedores=b,c()})},a.print=function(){window.print()},a.init=function(){a.isOpen(),a.obtenerListaVendedores(function(){a.resumen()})},a.init()}function mainController(a,b,c,d,e){a.isOpen=function(){b.get("/caja/abierta").success(function(a,b,c,d){e.cajaAbierta=a})},a.init=function(){a.isOpen()},a.init()}cuentaController.$inject=["$scope","$http","$window","$location"],articuloController.$inject=["$scope","$http","$window","$location"],venderController.$inject=["$scope","$http","$window","$location","$rootScope"],ventaController.$inject=["$scope","$http","$window","$location"],retiroController.$inject=["$scope","$http","$window","$location"],cajaController.$inject=["$scope","$http","$window","$location","$rootScope"],mainController.$inject=["$scope","$http","$window","$location","$rootScope"],angular.module("mainApp",["ngCookies","ngResource","ngRoute","ngSanitize","ui.bootstrap"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/articulo",{templateUrl:"views/articulo.html",controller:"ArticuloController",controllerAs:"articulo"}).when("/vender",{templateUrl:"views/vender.html",controller:"VenderController",controllerAs:"vender"}).when("/venta",{templateUrl:"views/venta.html",controller:"VentaController",controllerAs:"venta"}).when("/retiro",{templateUrl:"views/retiro.html",controller:"RetiroController",controllerAs:"retiro"}).when("/caja",{templateUrl:"views/caja.html",controller:"CajaController",controllerAs:"caja"}).when("/cuenta",{templateUrl:"views/cuenta.html",controller:"CuentaController",controllerAs:"cuenta"}).otherwise({redirectTo:"/caja"}),b.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]).controller("MainController",mainController).controller("VentaController",ventaController).controller("VenderController",venderController).controller("RetiroController",retiroController).controller("CajaController",cajaController).controller("ArticuloController",articuloController).controller("CuentaController",cuentaController),angular.module("mainApp").run(["$templateCache",function(a){"use strict";a.put("views/admin/articulo.html",'<div> <div id="agregarArticulo" class="panel panel-primary"> <div class="panel-heading">Agregar nuevo artículo</div> <div class="panel-body"> <form> <div class="form-group-sm"> <label for="descripcion">Código de barra</label> <input type="text" id="codigo" class="form-control" placeholder="Codigo de barra" ng-model="articulo.codigo"> </div> <div class="form-group-sm"> <label for="descripcion">Descripción</label> <input type="text" id="descripcion" class="form-control" placeholder="Descripcion" ng-model="articulo.descripcion"> </div> <div class="form-group-sm"> <label for="cantidadStock">Stock</label> <input type="number" id="cantidadStock" class="form-control" placeholder="Stock" ng-model="articulo.cantidadStock" value="" disabled min="0" max="9999"> </div> <div class="form-group-sm"> <label for="cantidad">Cantidad</label> <input type="number" id="cantidad" class="form-control" placeholder="Cantidad" ng-model="articulo.cantidad" min="0" max="9999"> </div> <div class="form-group-sm"> <label for="precio">Precio de lista</label> <input type="number" step="0.01" id="precio" class="form-control" placeholder="Precio lista" ng-model="articulo.precioLista" min="0"> </div> <div class="form-group-sm"> <label for="factor1">Factor 1</label> <input type="number" step="0.01" id="factor1" class="form-control" placeholder="factor 1" ng-model="articulo.factor1" value="1.0" min="0"> </div> <div class="form-group-sm"> <label for="factor2">Factor 2</label> <input type="number" step="0.01" id="factor2" class="form-control" placeholder="factor 2" ng-model="articulo.factor2" value="1.0" min="0"> </div> <div style="margin-top: 10px"> <button ng-click="agregarArticulo();" class="btn btn-success" ng-disabled="!isModificable();">Agregar nuevo</button> <button ng-click="modificarArticulo();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> <div id="listaArticulos"> <div class="panel panel-primary"> <div class="panel-heading">Buscar artículos</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar articulo" ng-model="search" ng-change="buscarArticulo();"> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaArticulo();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaArticulo" class="table"> <thead> <tr> <th>Código</th> <th>Precio / Lista</th> <th>f1 / f2</th> <th>Stock</th> <th>Descripción</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="articulo in listado.content"> <td style="width: 20%">{{articulo.codigo}}</td> <td style="width: 10%">{{articulo.precio | currency}} / {{articulo.precioLista | currency}}</td> <td style="width: 10%">{{articulo.factor1 | number:2}} / {{articulo.factor2 | number:2}}</td> <td style="width: 10%">{{articulo.cantidadStock}} ({{articulo.unidadesVendidas}})</td> <td style="width: 30%">{{articulo.descripcion}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="modificar(articulo);" class="btn btn-primary btn-sm">Modificar</button> <button ng-click="copiar(articulo);" class="btn btn-primary btn-sm">Copiar</button> <button ng-click="eliminar(articulo);" class="btn btn-danger btn-sm">Eliminar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/admin/vendedor.html",'<div> <div id="agregarArticulo" class="panel panel-primary"> <div class="panel-heading">Vendedores</div> <div class="panel-body"> <form> <div class="form-group-sm"> <label for="username">Username</label> <input type="text" id="username" class="form-control" placeholder="Username" ng-model="vendedor.username"> </div> <div class="form-group-sm"> <label for="password">Password</label> <input type="password" id="password" class="form-control" placeholder="Password" ng-model="vendedor.password"> </div> <div class="form-group-sm"> <label for="nombre">Nombre</label> <input type="text" id="nombre" class="form-control" placeholder="Nombre" ng-model="vendedor.nombre" value=""> </div> <div class="form-group-sm"> <label for="apellido">Apellido</label> <input type="text" id="apellido" class="form-control" placeholder="Apellido" ng-model="vendedor.apellido"> </div> <div style="margin-top: 10px"> <button ng-click="agregar();" class="btn btn-success" ng-disabled="!isModificable();">Agregar nuevo</button> <button ng-click="modificar();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar vendedor</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar vendedor" ng-model="search" ng-change="buscar();"> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaVendedor();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th>Username</th> <th>Nombre</th> <th>Apellido</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="vendedor in listado.content"> <td style="width: 10%">{{vendedor.username}}</td> <td style="width: 10%">{{vendedor.nombre}}</td> <td style="width: 10%">{{vendedor.apellido}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="editar(vendedor);" class="btn btn-primary btn-sm">Modificar</button> <button ng-click="eliminar(vendedor);" class="btn btn-danger btn-sm">Eliminar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/admin/venta.html",'<div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar vendedor" ng-model="search"> </div> <div class="row" style="margin-top: 10px"> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="startTime" is-open="dtStartTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openStartTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="endTime" is-open="dtEndTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openEndTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6"> <span class="input-group-btn"> <button type="button" class="btn btn-primary" ng-click="buscar()">Buscar</button> </span> </div> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerLista();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th style="width: 15%">Fecha</th> <th style="width: 10%">Username</th> <th style="width: 15%">Código</th> <th style="width: 15%">Descripción</th> <th style="width: 5%">Cantidad</th> <th style="width: 15%">f1 / f2 / Lista</th> <th style="width: 15%">Monto</th> <th style="width: 5%">Forma de Pago</th> <th style="width: 5%">Cupon</th> <th style="width: 5%"></th> </tr> </thead> <tbody> <tr ng-repeat="v in listado.content"> <td>{{v.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td>{{v.username}}</td> <td>{{v.codigo}}</td> <td>{{v.descripcion}}</td> <td>{{v.cantidad}}</td> <td>{{v.factor1 | number:2}} / {{v.factor2 | number:2}} / {{v.precioLista | currency}}</td> <td>{{v.precio | currency}}</td> <td>{{v.tipoPago}}</td> <td>{{v.nroCupon}}</td> <td><h5 ng-show="v.precio < 0"><span class="label label-danger">Devolución</span></h5> <h5 ng-show="(v.factor1*v.factor2*v.precioLista) > v.precio"><span class="label label-info">Descuento</span></h5></td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/articulo.html",'<div ng-controller="ArticuloController"> <div class="panel panel-primary"> <div class="panel-heading">Agregar nuevo artículo</div> <div class="panel-body"> <form> <div class="form-group-sm"> <label for="descripcion">Código de barra</label> <input type="text" id="codigo" class="form-control" placeholder="Codigo de barra" ng-model="articulo.codigo"> </div> <div class="form-group-sm"> <label for="descripcion">Descripción</label> <input type="text" id="descripcion" class="form-control" placeholder="Descripcion" ng-model="articulo.descripcion"> </div> <div class="form-group-sm"> <label for="precio">Precio</label> <input type="number" step="0.01" id="precio" class="form-control" placeholder="Precio" ng-model="articulo.precioLista" min="0"> </div> <div class="form-group-sm"> <label for="cantidadStock">Stock</label> <input type="number" id="cantidadStock" class="form-control" placeholder="Stock" ng-model="articulo.cantidadStock" value="" disabled min="0" max="9999"> </div> <div class="form-group-sm"> <label for="cantidad">Cantidad</label> <input type="number" id="cantidad" class="form-control" placeholder="Cantidad" ng-model="articulo.cantidad" min="0" max="9999"> </div> <div style="margin-top: 10px"> <button ng-click="agregarArticulo();" class="btn btn-success" ng-disabled="!isModificable();">Agregar nuevo</button> <button ng-click="modificarArticulo();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> <div id="listaArticulos"> <div class="panel panel-primary"> <div class="panel-heading">Buscar artículos</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar articulo" ng-model="search" ng-change="buscarArticulo();"> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaArticulo();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaArticulo" class="table"> <thead> <tr> <th>Código</th> <th>Precio</th> <th>Stock</th> <th>Descripción</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="articulo in listado.content"> <td style="width: 20%">{{articulo.codigo}}</td> <td style="width: 10%">{{articulo.precio | currency}}</td> <td style="width: 10%">{{articulo.cantidadStock}} ({{articulo.unidadesVendidas}})</td> <td style="width: 40%">{{articulo.descripcion}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="modificar(articulo);" class="btn btn-primary btn-sm">Modificar</button> <button ng-click="copiar(articulo);" class="btn btn-primary btn-sm">Copiar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/caja.html",'<div ng-controller="CajaController"> <div class="panel panel-primary no-print"> <div class="panel-heading">Caja Resumen del día</div> <div class="panel-body"> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="vendedor" style="width: 200px">Vendedor</span> <select class="btn btn-default" ng-options="vendedor as vendedor.username for vendedor in vendedores.content track by vendedor.username" ng-model="vendedor" ng-change="resumen();"> <option value=""></option> </select> </div> <div class="input-group" style="margin-bottom: 5px" ng-show="cajaAbierta"> <span class="input-group-addon" id="apertura" style="width: 200px">Apertura de caja</span> <input type="text" class="form-control" disabled value="{{caja.apertura.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}"> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="efectivo" style="width: 200px">Efectivo</span> <input type="text" class="form-control" disabled value="{{caja.efectivo | currency}}"> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="tarjeta" style="width: 200px">Tarjeta</span> <input type="text" class="form-control" disabled value="{{caja.tarjeta | currency}}"> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="totalVentaDia" style="width: 200px">Total venta del día</span> <input type="text" class="form-control" disabled value="{{caja.totalVentaDia | currency}}"> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="efectivoDiaSiguiente" style="width: 200px">Efectivo día siguiente</span> <input type="text" class="form-control" disabled value="{{caja.efectivoDiaSiguiente | currency}}"> </div> <div class="input-group" style="margin-bottom: 5px" ng-hide="cajaAbierta" ng-class="{\'has-error\': efectivoApertura == 0}"> <span class="input-group-addon" id="efectivoDiaSiguiente" style="width: 200px">Efectivo en caja</span> <input type="number" class="form-control" ng-model="efectivoApertura" min="0" step="1"> </div> <div style="margin-top: 10px"> <button ng-click="abrir();" class="btn btn-success" ng-hide="cajaAbierta" ng-disabled="vendedor.username == undefined">Abrir</button> <button ng-click="cerrar();" class="btn btn-success" ng-show="cajaAbierta" ng-disabled="vendedor.username == undefined">Cerrar e Imprimir</button> </div> </div> </div> <div id="cajaReporteImprimir" ng-hide="cajaAbierta || imprimir.caja.cajaId == undefined"> <div class="panel panel-primary"> <div class="panel-heading">Caja Resumen</div> <div class="panel-body"> <button ng-click="print();" class="btn btn-success">Imprimir</button> <h4>Número de Cierre: {{imprimir.caja.cajaId}}</h4> <h4>Apertura de Caja: {{imprimir.caja.apertura.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}} ({{imprimir.caja.aperturaUsername}})</h4> <h4>Cierre de Caja: {{imprimir.caja.cierre.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}} ({{imprimir.caja.cierreUsername}})</h4> <h4>Efectivo: {{imprimir.caja.efectivo | currency}}</h4> <h4>Tarjeta: {{imprimir.caja.tarjeta | currency}}</h4> <h4>Total ventas del día: {{imprimir.caja.totalVentaDia | currency}}</h4> <h4>Efectivo día siguiente: {{imprimir.caja.efectivoDiaSiguiente | currency}}</h4> </div> </div> <div id="listaRetiros" style="font-size: x-small"> <div class="panel panel-primary" style="width: 90%; margin: 5%; margin-top: 10px"> <div class="panel-heading">Retiros</div> <table id="tablaListaRetiros" class="table"> <thead> <tr> <th>Fecha</th> <th>Vendedor</th> <th>Monto</th> <th>Descripción</th> </tr> </thead> <tbody> <tr ng-repeat="retiro in imprimir.retiroList"> <td style="width: 20%">{{retiro.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td style="width: 20%">{{retiro.username}}</td> <td style="width: 20%">{{retiro.monto | currency}}</td> <td style="width: 40%">{{retiro.descripcion}}</td> </tr> </tbody> </table> </div> </div> <div id="lista" style="font-size: x-small"> <div class="panel panel-primary" style="width: 90%; margin: 5%; margin-top: 10px"> <div class="panel-heading">Ventas</div> <div class="panel-body"> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th style="width: 15%">Fecha</th> <th style="width: 10%">Username</th> <th style="width: 15%">Código</th> <th style="width: 25%">Descripción</th> <th style="width: 5%">Cantidad</th> <th style="width: 5%">Monto</th> <th style="width: 10%">Forma de Pago</th> <th style="width: 10%">Cupon</th> <th style="width: 5%"></th> </tr> </thead> <tbody> <tr ng-repeat="v in imprimir.ventaList"> <td>{{v.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td>{{v.username}}</td> <td>{{v.codigo}}</td> <td>{{v.descripcion}}</td> <td>{{v.cantidad}}</td> <td>{{v.precio | currency}}</td> <td>{{v.tipoPago}}</td> <td>{{v.nroCupon}}</td> <td><h6 ng-show="v.precio < 0"><span class="label label-danger">Devolución</span></h6> <h6 ng-show="(v.factor1*v.factor2*v.precioLista) > v.precio"><span class="label label-info">Descuento</span></h6></td> </tr> </tbody> </table> </div> </div> </div> </div>'),a.put("views/cuenta.html",'<div class="row"> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading">Cuenta corriente</div> <div class="panel-body"> <form> <div class="row"> <div class="col-md-12"> <div class="form-group-sm"> <label for="username">DNI</label> <input type="text" id="username" class="form-control" placeholder="DNI" ng-model="cuenta.dni" ng-disabled="cuenta.id > 0"> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group-sm"> <label for="nombre">Nombre</label> <input type="text" id="nombre" class="form-control" placeholder="Nombre" ng-model="cuenta.nombre" value=""> </div> </div> <div class="col-md-6"> <div class="form-group-sm"> <label for="apellido">Apellido</label> <input type="text" id="apellido" class="form-control" placeholder="Apellido" ng-model="cuenta.apellido"> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group-sm"> <label for="email">Correo</label> <input type="email" id="email" class="form-control" placeholder="Email" ng-model="cuenta.email"> </div> </div> <div class="col-md-6"> <div class="form-group-sm"> <label for="telefono">Telefono</label> <input type="text" id="telefono" class="form-control" placeholder="Telefono" ng-model="cuenta.telefono"> </div> </div> </div> <div style="margin-top: 10px"> <button ng-click="agregar();" class="btn btn-success" ng-disabled="!isModificable();">Agregar</button> <button ng-click="modificar();" class="btn btn-primary" ng-disabled="isModificable();">Modificar</button> </div> </form> </div> </div> </div> <div class="col-md-6"> <div class="panel panel-primary"> <div class="panel-heading">Resumen de cuenta</div> <div class="panel-body"> <form> <div class="row"> <div class="col-md-8"> <div class="form-group-sm"> <label for="cc">Cuenta Corriente</label> <input type="text" id="cc" class="form-control" value="{{cuenta.apellido}} {{cuenta.nombre}}" disabled> </div> </div> <div class="col-md-4"> <div class="form-group-sm"> <label for="saldo">Saldo</label> <input type="text" id="saldo" class="form-control" disabled value="{{cuenta.saldo}}"> </div> </div> </div> <div class="row"> <div class="col-md-6"> <div class="form-group-sm"> <label for="saldo">Vendedor</label> <select class="form-control" ng-options="vendedor as vendedor.username for vendedor in vendedores.content track by vendedor.username" ng-model="vendedor"> <option value="" selected></option> </select> </div> </div> </div> <div class="row"> <div class="col-md-8"> <div class="form-group-sm"> <label for="descripcion">Descripcion</label> <input type="text" list="desc" id="descripcion" class="form-control" value="" ng-model="descripcion"> <datalist id="desc"> <option value="Entrega parcial."> <option value="Entrega final."> </option></option></datalist> </div> </div> <div class="col-md-4"> <div class="form-group-sm"> <label for="apellido">Entrega</label> <input type="number" step="1" ng-model="entrega" id="Entrega" class="form-control"> </div> </div> </div> <div class="row" style="margin-top: 10px"> <div class="col-md-4"> <button ng-click="agregarEntrega(cuenta, descripcion, entrega, vendedor);" class="btn btn-success" ng-disabled="!(cuenta.id > 0) || vendedor == undefined">Agregar</button> </div> </div> </form> </div> </div> </div> </div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar" ng-model="search" ng-change="buscar();"> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaVendedor();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th>DNI</th> <th>Nombre</th> <th>Apellido</th> <th>Email</th> <th>Telefono</th> <th>Saldo</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="cuenta in listado.content"> <td style="width: 10%">{{cuenta.dni}}</td> <td style="width: 10%">{{cuenta.nombre}}</td> <td style="width: 10%">{{cuenta.apellido}}</td> <td style="width: 10%">{{cuenta.email}}</td> <td style="width: 10%">{{cuenta.telefono}}</td> <td style="width: 10%">{{cuenta.saldo}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="editar(cuenta);" class="btn btn-primary btn-sm">Modificar</button> <!--\r\n                        <button ng-click="verCuenta(cuenta);" class="btn btn-info btn-sm">Ver cuenta</button>\r\n                        <button ng-click="eliminar(cuenta);" class="btn btn-danger btn-sm">Eliminar</button>\r\n                        --> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div>'),
a.put("views/retiro.html",'<div ng-controller="RetiroController"> <div class="panel panel-primary"> <div class="panel-heading">Retiros</div> <div class="panel-body"> <form> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="vendedor" style="width: 150px">Vendedor</span> <select class="btn btn-default" ng-options="vendedor as vendedor.username for vendedor in vendedores.content track by vendedor.username" ng-model="vendedor"> <option value=""></option> </select> </div> <div class="form-group-sm"> <label for="descripcion">Descripción</label> <input type="text" id="descripcion" class="form-control" placeholder="Descripcion" ng-model="retiro.descripcion" list="desc"> <datalist id="desc"> <option value="Retiro efectivo de caja."> <option value="Gastos del local."> </option></option></datalist> </div> <div class="form-group-sm"> <label for="precio">Monto</label> <input type="number" step="0.01" id="precio" class="form-control" placeholder="Monto" ng-model="retiro.monto" min="0"> </div> <div style="margin-top: 10px"> <button ng-click="agregar();" class="btn btn-success" ng-disabled="vendedor.username == undefined || retiro.retiroId != undefined">Retirar</button> <button ng-click="modificarRetiro();" class="btn btn-info" ng-disabled="vendedor.username == undefined || retiro.retiroId == undefined">Modificar</button> </div> </form> </div> </div> <div id="listaRetiros"> <div class="panel panel-primary"> <div class="panel-heading">Retiros</div> <div class="panel-body"> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerLista();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaRetiros" class="table"> <thead> <tr> <th style="width: 20%">Fecha</th> <th style="width: 20%">Vendedor</th> <th style="width: 20%">Monto</th> <th style="width: 30%">Descripción</th> <th style="width: 10%"></th> </tr> </thead> <tbody> <tr ng-repeat="retiro in listado.content"> <td>{{retiro.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td>{{retiro.username}}</td> <td>{{retiro.monto | currency}}</td> <td>{{retiro.descripcion}}</td> <td> <div class="btn-group"> <button ng-click="modificar(retiro);" class="btn btn-primary btn-sm">Modificar</button> </div> </td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>'),a.put("views/vender.html",'<div id="listaArticulos"> <div class="panel panel-primary"> <div class="panel-heading">Buscar artículos</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar articulo" ng-model="search" ng-change="buscarArticulo();"> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerListaArticulo();"></ul> </div> <table id="tablaListaArticulo" class="table"> <thead> <tr> <th>Código</th> <th>Precio</th> <th>Stock</th> <th>Descripción</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="articulo in listado.content"> <td style="width: 20%">{{articulo.codigo}}</td> <td style="width: 10%">{{articulo.precio | currency}}</td> <td style="width: 10%">{{articulo.cantidadStock}}</td> <td style="width: 40%">{{articulo.descripcion}}</td> <td style="width: 20%"> <div class="btn-group"> <button ng-click="agregarCarrito(articulo);" class="btn btn-primary btn-sm">Agregar</button> </div> </td> </tr> </tbody> </table> </div> </div> <div id="listaCarrito"> <div class="panel panel-primary"> <div class="panel-heading">Artículos en el carrito de compras</div> <div class="panel-body"> <div class="input-group" style="margin-bottom: 5px" ng-class="{\'has-error\': vendedor.username == undefined}"> <span class="input-group-addon" id="vendedor" style="width: 150px">Vendedor</span> <select class="form-control" ng-options="vendedor as vendedor.username for vendedor in vendedores.content track by vendedor.username" ng-model="vendedor" ng-change="actualizarCarrito();"> <option value="" selected></option> </select> </div> <div class="input-group" style="margin-bottom: 5px" ng-class="{\'has-error\': formaPago.id == 0}"> <span class="input-group-addon" id="formaPago" style="width: 150px">Forma de pago</span> <select class="form-control" ng-options="pago as pago.value for pago in pagos track by pago.value" ng-model="formaPago" ng-change="actualizarCarrito();"></select> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="montoTotal" style="width: 150px">Monto total</span> <input type="number" class="form-control" disabled ng-model="montoTotal" min="0" step="1"> </div> <div class="input-group" style="margin-bottom: 5px" ng-show="formaPago.id == 3"> <span class="input-group-addon" id="efectivo" style="width: 150px">Efectivo</span> <input type="number" class="form-control" ng-model="efectivo" ng-disabled="!(formaPago.id == 3)" ng-change="actualizarTarjeta();" min="0" step="1"> </div> <div class="input-group" style="margin-bottom: 5px" ng-show="formaPago.id == 3"> <span class="input-group-addon" id="tarjeta" style="width: 150px">Tarjeta</span> <input type="number" class="form-control" ng-model="tarjeta" disabled min="0" step="1"> </div> <div class="input-group" style="margin-bottom: 5px" ng-show="formaPago.id == 4" ng-class="{\'has-error\': ((formaPago.id == 4 ) && dni == \'\')}"> <span class="input-group-addon" id="dni" style="width: 150px">C. Corriente DNI</span> <input type="text" class="form-control" ng-model="dni" placeholder="dni"> </div> <div class="input-group" style="margin-bottom: 5px" ng-show="formaPago.id == 4"> <span class="input-group-addon" id="entregaInicial" style="width: 150px">Entrega Inicial</span> <input type="number" class="form-control" ng-model="entregaInicial" min="0" step="1"> </div> <div class="input-group" style="margin-bottom: 5px" ng-class="{\'has-error\': ((formaPago.id == 3 || formaPago.id == 2 ) && numeroCupon == \'\')}"> <span class="input-group-addon" id="numeroCupon" style="width: 150px">Número Cupon</span> <input type="text" class="form-control" ng-model="numeroCupon" placeholder="Numero de cupon"> </div> <div class="input-group" style="margin-bottom: 5px"> <span class="input-group-addon" id="finalizarVenta" style="width: 150px">Finalizar Venta</span> <div class="btn-group"> <button class="btn btn-success btn-sm" ng-click="confirmarVenta();" ng-disabled="enableConfirm();">Confirmar Venta</button> <button class="btn btn-info btn-sm" ng-click="notaCredito();">Generar nota crédito</button> <button class="btn btn-danger btn-sm" ng-click="cancelar();">Cancelar Venta</button> </div> </div> </div> <table id="tablaListaArticuloCarrito" class="table"> <thead> <tr> <th style="width: 10%">Vendedor</th> <th style="width: 20%">Código</th> <th style="width: 30%">Descripción</th> <th style="width: 5%">Descuento</th> <th style="width: 5%">Precio</th> <th style="width: 5%">Cantidad</th> <th style="width: 10%">Subtotal</th> <th style="width: 15%">Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="item in carrito"> <td>{{item.vendedor.username}}</td> <td>{{item.articulo.codigo}}</td> <td>{{item.articulo.descripcion}}</td> <td><input type="number" min="0" max="50" step="5" ng-model="item.descuento" ng-change="calcularTotal();" ng-disabled="item.articulo.codigo == \'N.CREDITO\'"></td> <td>{{item.articulo.precio | currency}}</td> <td>{{item.cantidad}}</td> <td>{{precioConDescuento(item.cantidad*item.articulo.precio, item.descuento) | currency}}</td> <td> <div class="btn-group"> <button ng-click="agregarCarrito(item.articulo);" class="btn btn-primary btn-sm" ng-show="item.articulo.precio >= 0" ng-disabled="item.articulo.codigo == \'N.CREDITO\'"><span class="glyphicon glyphicon-plus"></span></button> <button ng-click="removerCarrito(item.articulo);" class="btn btn-danger btn-sm" ng-disabled="item.articulo.codigo == \'N.CREDITO\'"><span class="glyphicon glyphicon-minus"></span></button> </div> </td> </tr> </tbody> <thead> <tr> <th colspan="7">Devoluciones</th> <th><button class="btn btn-danger btn-sm" ng-click="devolucion();">Cargar Devolución</button></th> </tr> <tr> <th style="width: 10%">Vendedor</th> <th style="width: 20%">Código</th> <th style="width: 30%">Descripción</th> <th style="width: 5%">Precio</th> <th style="width: 5%">Cantidad</th> <th style="width: 10%">Subtotal</th> <th style="width: 20%">Acciones</th> <th></th> </tr> </thead> <tbody> <tr ng-repeat="item in listDevolucion"> <td>{{item.vendedor.username}}</td> <td>{{item.venta.codigo}}</td> <td>{{item.venta.descripcion}}</td> <td>{{item.venta.precio | currency}}</td> <td>{{item.cantidad}}</td> <td>{{(item.cantidad*item.venta.precio) | currency}}</td> <td> <div class="btn-group"> <button ng-click="removerDevolucion(item.venta);" class="btn btn-danger btn-sm"><span class="glyphicon glyphicon-minus"></span></button> </div> </td> <td></td> </tr> </tbody> </table> </div> </div> <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirmacionVenta" id="confirmacionVenta"> <div class="modal-dialog modal-sm"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Confirmación de la venta</h4> </div> <div class="modal-body"> <p>La venta se ha realizado con éxito, el código de venta es: <h3>{{mensajeConfirmacionVenta}}</h3></p> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button> </div> </div> </div> </div> <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="dialogDevolucion" id="dialogDevolucion"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button> <h4 class="modal-title">Devoluciones</h4> </div> <div class="modal-body"> <div class="panel panel-primary"> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Ingresar Código</label> <input type="text" id="buscarDevolucion" class="form-control" placeholder="codigo" ng-model="codigoDevolucion" ng-change="buscarArticuloDevolucion();"> </div> </div> <table id="tablaListaArticuloDevolucion" class="table"> <thead> <tr> <th>Código</th> <th>Precio</th> <th>Descripción</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="articulo in listadoDevolucion" ng-show="articulo.precio > 0"> <td style="width: 20%">{{articulo.codigo}}</td> <td style="width: 10%">{{articulo.precio | currency}}</td> <td style="width: 40%">{{articulo.descripcion}}</td> <td style="width: 20%"> <div class="btn-group"> <button class="btn btn-primary btn-sm" ng-click="agregarDevolucion(articulo);">Agregar</button> </div> </td> </tr> </tbody> </table> </div> </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button> </div> </div> </div> </div>'),a.put("views/venta.html",'<div> <div id="lista"> <div class="panel panel-primary"> <div class="panel-heading">Buscar</div> <div class="panel-body"> <div class="form-group-sm"> <label for="buscar">Buscar</label> <input type="text" id="buscar" class="form-control" placeholder="buscar vendedor" ng-model="search"> </div> <div class="row" style="margin-top: 10px"> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="startTime" is-open="dtStartTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openStartTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6"> <p class="input-group"> <input type="text" class="form-control" uib-datepicker-popup ng-model="endTime" is-open="dtEndTime.opened" date-disabled="disabled(date, mode)" ng-required="true" close-text="Cerrar" current-text="Hoy" clear-text="Limpiar"> <span class="input-group-btn"> <button type="button" class="btn btn-default" ng-click="openEndTime($event)"><i class="glyphicon glyphicon-calendar"></i></button> </span> </p> </div> <div class="col-md-6" style="margin-bottom: 10px"> <button class="btn btn-primary" ng-click="buscar()">Buscar</button> </div> </div> <ul uib-pagination total-items="listado.totalElements" ng-model="pageNumber" max-size="maxSize" items-per-page="listado.size" class="pagination-sm" boundary-links="true" ng-change="obtenerLista();"></ul> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> <table id="tablaListaVendedor" class="table"> <thead> <tr> <th style="width: 15%">Fecha</th> <th style="width: 10%">Venta</th> <th style="width: 10%">Username</th> <th style="width: 15%">Código</th> <th style="width: 15%">Descripción</th> <th style="width: 5%">Cantidad</th> <th style="width: 15%">Monto</th> <th style="width: 5%">Forma de Pago</th> <th style="width: 5%">Cupon</th> <th style="width: 5%"></th> </tr> </thead> <tbody> <tr ng-repeat="v in listado.content"> <td>{{v.fecha.epochSecond*1000 | date:\'yyyy-MM-dd HH:mm:ss\' : \'+0000\'}}</td> <td>{{v.codigoDevolucion}}</td> <td>{{v.username}}</td> <td>{{v.codigo}}</td> <td>{{v.descripcion}}</td> <td>{{v.cantidad}}</td> <td>{{v.precio | currency}}</td> <td>{{v.tipoPago}}</td> <td>{{v.nroCupon}}</td> <td><h5 ng-show="v.precio < 0"><span class="label label-danger">Devolución</span></h5> <h5 ng-show="(v.factor1*v.factor2*v.precioLista) > v.precio"><span class="label label-info">Descuento</span></h5></td> </tr> </tbody> </table> <div class="panel-footer"> <pre>Página: {{pageNumber}} / {{listado.totalPages}}</pre> </div> </div> </div> </div>')}]);